tribe.events=tribe.events||{},tribe.events.views=tribe.events.views||{},tribe.events.views.viewSelector={},function(b,a){'use strict';var c=b(document);a.selectors={viewSelector:'[data-js="tribe-events-view-selector"]',viewSelectorTabsClass:'.tribe-events-c-view-selector--tabs',viewSelectorButton:'[data-js="tribe-events-view-selector-button"]',viewSelectorButtonActiveClass:'.tribe-events-c-view-selector__button--active',viewSelectorListContainer:'[data-js="tribe-events-view-selector-list-container"]'},a.deinitAccordion=function(a,b){tribe.events.views.accordion.deinitAccordion(0,a),tribe.events.views.accordion.deinitAccordionA11yAttrs(a,b),b.css('display','')},a.initAccordion=function(b,a,c){tribe.events.views.accordion.initAccordion(b)(0,a),tribe.events.views.accordion.initAccordionA11yAttrs(a,c)},a.deinitViewSelectorAccordion=function(b){var c=b.find(a.selectors.viewSelectorButton),d=b.find(a.selectors.viewSelectorListContainer);a.deinitAccordion(c,d),c.removeClass(a.selectors.viewSelectorButtonActiveClass.className())},a.initViewSelectorAccordion=function(b){var c=b.find(a.selectors.viewSelectorButton),d=b.find(a.selectors.viewSelectorListContainer);a.initAccordion(b,c,d)},a.initState=function(b){var c=b.find(a.selectors.viewSelector),d={mobileInitialized:!1,desktopInitialized:!1};c.data('tribeEventsState',d)},a.deinitViewSelector=function(b){a.deinitViewSelectorAccordion(b)},a.initViewSelector=function(d){var c=d.find(a.selectors.viewSelector),b,f,g,e;c.length&&(b=c.data('tribeEventsState'),f=c.hasClass(a.selectors.viewSelectorTabsClass.className()),f?(g=d.data('tribeEventsState'),e=g.isMobile,e&&!b.mobileInitialized?(a.initViewSelectorAccordion(d),b.desktopInitialized=!1,b.mobileInitialized=!0,c.data('tribeEventsState',b)):!e&&!b.desktopInitialized&&(a.deinitViewSelectorAccordion(d),b.mobileInitialized=!1,b.desktopInitialized=!0,c.data('tribeEventsState',b))):!b.mobileInitialized&&!b.desktopInitialized&&(a.initViewSelectorAccordion(d),b.desktopInitialized=!0,b.mobileInitialized=!0,c.data('tribeEventsState',b)))},a.handleViewSelectorButtonClick=function(b){b.data.target.toggleClass(a.selectors.viewSelectorButtonActiveClass.className())},a.handleClick=function(d){var f=Boolean(b(d.target).closest(a.selectors.viewSelector).length),g,e,c,h;f||(g=d.data.container,e=g.find(a.selectors.viewSelector),c=e.find(a.selectors.viewSelectorButton),c.hasClass(a.selectors.viewSelectorButtonActiveClass.className())&&(h=e.find(a.selectors.viewSelectorListContainer),c.removeClass(a.selectors.viewSelectorButtonActiveClass.className()),tribe.events.views.accordion.closeAccordion(c,h)))},a.handleResize=function(b){a.initViewSelector(b.data.container)},a.unbindEvents=function(b){c.off('click',a.handleClick),b.off('resize.tribeEvents',a.handleResize).find(a.selectors.viewSelectorButton).off('click',a.handleViewSelectorButtonClick)},a.bindEvents=function(b){var d=b.find(a.selectors.viewSelectorButton);c.on('click',{container:b},a.handleClick),b.on('resize.tribeEvents',{container:b},a.handleResize),d.on('click',{target:d},a.handleViewSelectorButtonClick)},a.deinit=function(c,d,e){var b=c.data.container;a.deinitViewSelector(b),a.unbindEvents(b),b.off('beforeAjaxSuccess.tribeEvents',a.deinit)},a.init=function(d,e,b,f){var c=b.find(a.selectors.viewSelector);if(!c.length)return;a.initState(b),a.initViewSelector(b),a.bindEvents(b),b.on('beforeAjaxSuccess.tribeEvents',{container:b},a.deinit)},a.ready=function(){c.on('afterSetup.tribeEvents',tribe.events.views.manager.selectors.container,a.init)},b(a.ready)}(jQuery,tribe.events.views.viewSelector)